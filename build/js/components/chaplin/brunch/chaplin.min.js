(function(){var e={backbone:window.Backbone,underscore:window._};for(var t in e)(function(t){var n={};n[t]=function(n,r,i){i.exports=e[t]};try{require(item)}catch(r){require.define(n)}})(t)})(),require.define({"chaplin/application":function(e,t,n){var r,i,s,o,u,a,f,l,c;c=t("underscore"),i=t("backbone"),l=t("chaplin/mediator"),o=t("chaplin/dispatcher"),a=t("chaplin/views/layout"),s=t("chaplin/composer"),f=t("chaplin/lib/router"),u=t("chaplin/lib/event_broker"),n.exports=r=function(){function e(){}return e.extend=i.Model.extend,c(e.prototype).extend(u),e.prototype.title="",e.prototype.dispatcher=null,e.prototype.layout=null,e.prototype.router=null,e.prototype.composer=null,e.prototype.initialize=function(){},e.prototype.initDispatcher=function(e){return this.dispatcher=new o(e)},e.prototype.initLayout=function(e){var t;return null==e&&(e={}),null==(t=e.title)&&(e.title=this.title),this.layout=new a(e)},e.prototype.initComposer=function(e){return null==e&&(e={}),this.composer=new s(e)},e.prototype.initRouter=function(e,t){return this.router=new f(t),"function"==typeof e&&e(this.router.match),this.router.startHistory()},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t,n,r;if(!this.disposed){for(t=["dispatcher","layout","router","composer"],n=0,r=t.length;r>n;n++)e=t[n],null!=this[e]&&(this[e].dispose(),delete this[e]);return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}}),require.define({"chaplin/mediator":function(e,t,n){var r,i,s,o;r=t("backbone"),s=t("chaplin/lib/support"),o=t("chaplin/lib/utils"),i={},i.subscribe=r.Events.on,i.unsubscribe=r.Events.off,i.publish=r.Events.trigger,i._callbacks=null,o.readonly(i,"subscribe","unsubscribe","publish"),i.seal=function(){return s.propertyDescriptors&&Object.seal?Object.seal(i):void 0},o.readonly(i,"seal"),n.exports=i}}),require.define({"chaplin/dispatcher":function(e,t,n){var r,i,s,o,u;u=t("underscore"),r=t("backbone"),o=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),n.exports=i=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=r.Model.extend,u(e.prototype).extend(s),e.prototype.previousControllerName=null,e.prototype.currentControllerName=null,e.prototype.currentController=null,e.prototype.currentAction=null,e.prototype.currentParams=null,e.prototype.url=null,e.prototype.initialize=function(e){return null==e&&(e={}),this.settings=u(e).defaults({controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("matchRoute",this.matchRouteHandler)},e.prototype.matchRouteHandler=function(e,t,n){return this.startupController(e.controller,e.action,t,n)},e.prototype.startupController=function(e,t,n,r){var i=this;return null==t&&(t="index"),n=n?u.clone(n):{},r=r?u.clone(r):{},r.changeURL!==!1&&(r.changeURL=!0),r.forceStartup!==!0&&(r.forceStartup=!1),r.forceStartup||this.currentControllerName!==e||this.currentAction!==t||this.currentParams&&!u(n).isEqual(this.currentParams)?this.loadController(e,function(s){return i.controllerLoaded(e,t,n,r,s)}):void 0},e.prototype.loadController=function(e,n){var r,i;return r=o.underscorize(e)+this.settings.controllerSuffix,i=this.settings.controllerPath+r,("undefined"!=typeof define&&null!==define?define.amd:void 0)?t([i],n):n(t(i))},e.prototype.controllerLoaded=function(e,t,n,r,i){var s,o;return s=new i(n,r),o=s.beforeAction?"executeBeforeActions":"executeAction",this[o](s,e,t,n,r)},e.prototype.executeAction=function(e,t,n,r,i){var s,o;return o=this.currentControllerName||null,s=this.currentController||null,this.previousControllerName=o,s&&(this.publishEvent("beforeControllerDispose",s),s.dispose(r,t)),i.previousControllerName=o,e[n](r,i),e.redirected?void 0:(this.currentControllerName=t,this.currentController=e,this.currentAction=n,this.currentParams=r,this.adjustURL(r,i),this.publishEvent("startupController",{previousControllerName:this.previousControllerName,controller:this.currentController,controllerName:this.currentControllerName,params:this.currentParams,options:i}))},e.prototype.executeBeforeActions=function(e,t,n,r,i){var s,u,a,f,l,c,h,p,d,v=this;for(f=[],u=arguments,d=o.getAllPropertyVersions(e,"beforeAction"),h=0,p=d.length;p>h;h++){s=d[h];for(l in s)if(a=s[l],l===n||RegExp("^"+l+"$").test(n)){if("string"==typeof a&&(a=e[a]),"function"!=typeof a)throw Error("Controller#executeBeforeActions: "+(""+a+" is not a valid beforeAction method for "+l+"."));f.push(a)}}return c=function(t,n){return null==n&&(n=null),e.redirected?void 0:t?(n=t.call(e,r,i,n),n&&"function"==typeof n.then?n.then(function(t){return v.currentController&&e!==v.currentController?void 0:c(f.shift(),t)}):c(f.shift(),n)):(v.executeAction.apply(v,u),void 0)},c(f.shift())},e.prototype.adjustURL=function(e,t){var n;if(null!=t.path)return n=t.path+(t.queryString?"?"+t.queryString:""),t.changeURL&&this.publishEvent("!router:changeURL",n,t),this.url=n},e.prototype.disposed=!1,e.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},e}()}}),require.define({"chaplin/composer":function(e,t,n){var r,i,s,o,u,a;a=t("underscore"),r=t("backbone"),u=t("chaplin/lib/utils"),s=t("chaplin/lib/composition"),o=t("chaplin/lib/event_broker"),n.exports=i=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=r.Model.extend,a(e.prototype).extend(o),e.prototype.compositions=null,e.prototype.initialize=function(e){return null==e&&(e={}),this.compositions={},this.subscribeEvent("!composer:compose",this.compose),this.subscribeEvent("!composer:retrieve",this.retrieve),this.subscribeEvent("startupController",this.cleanup)},e.prototype.compose=function(e,t,n){return"function"==typeof t?n||t.prototype.dispose?t.prototype instanceof s?this._compose(e,{composition:t,options:n}):this._compose(e,{options:n,compose:function(){var e,n;return this.item=new t(this.options),e=this.item.autoRender,n=void 0===e||!e,n&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(e,{compose:t}):"function"==typeof n?this._compose(e,{compose:n,options:t}):this._compose(e,t)},e.prototype._compose=function(e,t){var n,r;if("function"!=typeof t.compose&&null==t.composition)throw Error("Composer#compose was used incorrectly");return null!=t.composition?n=new t.composition(t.options):(n=new s(t.options),n.compose=t.compose,t.check&&(n.check=t.check)),r=this.compositions[e],r&&r.check(n.options)?r.stale(!1):(r&&r.dispose(),n.compose(n.options),n.stale(!1),this.compositions[e]=n),this.compositions[e]},e.prototype.retrieve=function(e,t){var n,r;return n=this.compositions[e],r=n&&!n.stale()?n.item:void 0,t(r)},e.prototype.cleanup=function(){var e,t,n;n=this.compositions;for(t in n)e=n[t],e.stale()?(e.dispose(),delete this.compositions[t]):e.stale(!0)},e.prototype.dispose=function(){var e,t,n;if(!this.disposed){this.unsubscribeAllEvents(),n=this.compositions;for(t in n)e=n[t],e.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}}),require.define({"chaplin/controllers/controller":function(e,t,n){var r,i,s,o,u={}.hasOwnProperty;o=t("underscore"),r=t("backbone"),s=t("chaplin/lib/event_broker"),n.exports=i=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=r.Model.extend,o(e.prototype).extend(r.Events),o(e.prototype).extend(s),e.prototype.view=null,e.prototype.redirected=!1,e.prototype.initialize=function(){},e.prototype.adjustTitle=function(e){return this.publishEvent("!adjustTitle",e)},e.prototype.compose=function(e,t,n){var r;return 1===arguments.length?(r=null,this.publishEvent("!composer:retrieve",e,function(e){return r=e}),r):this.publishEvent("!composer:compose",e,t,n)},e.prototype.redirectTo=function(e,t){return null==t&&(t={}),this.redirected=!0,this.publishEvent("!router:route",e,t,function(e){if(!e)throw Error("Controller#redirectTo: no route matched")})},e.prototype.redirectToRoute=function(e,t,n){return this.redirected=!0,this.publishEvent("!router:routeByName",e,t,n,function(e){if(!e)throw Error("Controller#redirectToRoute: no route matched")})},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t,n,r,i;if(!this.disposed){for(t in this)u.call(this,t)&&(e=this[t],e&&"function"==typeof e.dispose&&(e.dispose(),delete this[t]));for(this.unsubscribeAllEvents(),this.stopListening(),n=["redirected"],r=0,i=n.length;i>r;r++)t=n[r],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}}),require.define({"chaplin/models/collection":function(e,t,n){var r,i,s,o,u,a,f={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=t("underscore"),r=t("backbone"),s=t("chaplin/lib/event_broker"),o=t("chaplin/models/model"),u=t("chaplin/lib/utils"),n.exports=i=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return l(t,e),a(t.prototype).extend(s),t.prototype.model=o,t.prototype.initDeferred=function(){return a(this).extend($.Deferred())},t.prototype.serialize=function(){return this.map(u.serialize)},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,n,r;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),"function"==typeof this.reject&&this.reject(),t=["model","models","_byId","_byCid","_callbacks"],n=0,r=t.length;r>n;n++)e=t[n],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}(r.Collection)}}),require.define({"chaplin/models/model":function(e,t,n){var r,i,s,o,u,a,f,l={}.hasOwnProperty,c=function(e,t){function n(){this.constructor=e}for(var r in t)l.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};f=t("underscore"),r=t("backbone"),a=t("chaplin/lib/utils"),i=t("chaplin/lib/event_broker"),o=function(e,t,n){var i,s,o,f,l,c,h,p;i=a.beget(t),null==n&&(n={}),n[e.cid]=!0;for(s in t)if(l=t[s],l instanceof r.Model)i[s]=u(l,e,n);else if(l instanceof r.Collection){for(f=[],p=l.models,c=0,h=p.length;h>c;c++)o=p[c],f.push(u(o,e,n));i[s]=f}return delete n[e.cid],i},u=function(e,t,n){var r;return e===t||f(n).has(e.cid)?null:(r="function"==typeof e.getAttributes?e.getAttributes():e.attributes,o(e,r,n))},n.exports=s=function(e){function t(){t.__super__.constructor.apply(this,arguments)}return c(t,e),f(t.prototype).extend(i),t.prototype.initDeferred=function(){return f(this).extend($.Deferred())},t.prototype.getAttributes=function(){return this.attributes},t.prototype.serialize=function(){return o(this,this.getAttributes())},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,n,r;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),"function"==typeof this.reject&&this.reject(),t=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],n=0,r=t.length;r>n;n++)e=t[n],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}(r.Model)}}),require.define({"chaplin/views/layout":function(e,t,n){var r,i,s,o,u,a,f=function(e,t){return function(){return e.apply(t,arguments)}};a=t("underscore"),i=t("backbone"),u=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),r=i.$,n.exports=o=function(){function e(){this.openLink=f(this.openLink,this),this.initialize.apply(this,arguments)}return e.extend=i.Model.extend,a(e.prototype).extend(s),e.prototype.title="",e.prototype.events={},e.prototype.el=document,e.prototype.$el=r(document),e.prototype.cid="chaplin-layout",e.prototype.regions=null,e.prototype.initialize=function(e){return null==e&&(e={}),this.title=e.title,this.settings=a(e).defaults({titleTemplate:a.template("<%= subtitle %> â€“ <%= title %>"),openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),this.regions=[],this.subscribeEvent("beforeControllerDispose",this.hideOldView),this.subscribeEvent("startupController",this.showNewView),this.subscribeEvent("!adjustTitle",this.adjustTitle),this.subscribeEvent("!region:show",this.showRegion),this.subscribeEvent("!region:register",this.registerRegionHandler),this.subscribeEvent("!region:unregister",this.unregisterRegionHandler),this.settings.routeLinks&&this.startLinkRouting(),this.delegateEvents()},e.prototype.delegateEvents=i.View.prototype.delegateEvents,e.prototype.undelegateEvents=i.View.prototype.undelegateEvents,e.prototype.hideOldView=function(e){var t,n;return t=this.settings.scrollTo,t&&window.scrollTo(t[0],t[1]),n=e.view,n?n.$el.hide():void 0},e.prototype.showNewView=function(e){var t;return t=e.controller.view,t?t.$el.show():void 0},e.prototype.adjustTitle=function(e){var t;return null==e&&(e=""),t=this.settings.titleTemplate({title:this.title,subtitle:e}),setTimeout(function(){return document.title=t},50)},e.prototype.startLinkRouting=function(){return this.settings.routeLinks?r(document).on("click",this.settings.routeLinks,this.openLink):void 0},e.prototype.stopLinkRouting=function(){return this.settings.routeLinks?r(document).off("click",this.settings.routeLinks):void 0},e.prototype.openLink=function(e){var t,n,i,s,o,a,f,l,c,h,p,d,v,m;if(!(u.modifierKeyPressed(e)||(i=e.currentTarget,t=r(i),a="A"===i.nodeName,s=t.attr("href")||t.data("href")||null,null===s||void 0===s||""===s||"#"===s.charAt(0)||a&&("_blank"===t.attr("target")||"external"===t.attr("rel")||"http:"!==(d=i.protocol)&&"https:"!==d&&"file:"!==d)||(h=this.settings.skipRouting,p=typeof h,"function"===p&&!h(s,i)||"string"===p&&t.is(h))))){if(o=!a||(v=i.hostname)===location.hostname||""===v,!o)return this.settings.openExternalToBlank&&(e.preventDefault(),window.open(i.href)),void 0;a?(l=i.pathname,c=i.search.substring(1),"/"!==l.charAt(0)&&(l="/"+l)):(m=s.split("?"),l=m[0],c=m[1],null==c&&(c="")),f={queryString:c},n=function(t){t?e.preventDefault():a||(location.href=l)},this.publishEvent("!router:route",l,f,n)}},e.prototype.registerRegionHandler=function(e,t,n){return null!=t?this.registerRegion(e,t,n):this.registerRegions(e)},e.prototype.registerRegion=function(e,t,n){return this.unregisterRegion(e,t),this.regions.unshift({instance:e,name:t,selector:n})},e.prototype.registerRegions=function(e){var t,n,r,i,s,o;for(o=u.getAllPropertyVersions(e,"regions"),i=0,s=o.length;s>i;i++){r=o[i];for(n in r)t=r[n],this.registerRegion(e,t,n)}},e.prototype.unregisterRegionHandler=function(e,t){return null!=t?this.unregisterRegion(e,t):this.unregisterRegions(e)},e.prototype.unregisterRegion=function(e,t){var n;return n=e.cid,this.regions=a(this.regions).filter(function(e){return e.instance.cid!==n||e.name!==t})},e.prototype.unregisterRegions=function(e){return this.regions=a(this.regions).filter(function(t){return t.instance.cid!==e.cid})},e.prototype.showRegion=function(e,t){var n;if(n=a.find(this.regions,function(t){return t.name===e&&!t.instance.stale}),!n)throw Error("No region registered under "+e);return t.container=n.instance.$el.find(n.selector)},e.prototype.disposed=!1,e.prototype.dispose=function(){return this.disposed?void 0:(delete this.regions,this.stopLinkRouting(),this.unsubscribeAllEvents(),this.undelegateEvents(),delete this.title,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},e}()}}),require.define({"chaplin/views/view":function(e,t,n){var r,i,s,o,u,a,f={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};a=t("underscore"),i=t("backbone"),u=t("chaplin/lib/utils"),s=t("chaplin/lib/event_broker"),r=i.$,n.exports=o=function(e){function t(e){var n,r=this;e&&a(this).extend(a.pick(e,["autoAttach","autoRender","container","containerMethod","region"])),this.render===t.prototype.render?this.render=a(this.render).bind(this):(n=this.render,this.renderIsWrapped=!0,this.render=function(){return r.disposed?!1:(n.apply(r,arguments),r.autoAttach&&r.attach.apply(r,arguments),r)}),this.subviews=[],this.subviewsByName={},t.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",this.dispose),null!=this.regions&&this.publishEvent("!region:register",this),this.autoRender&&this.render()}return l(t,e),a(t.prototype).extend(s),t.prototype.autoRender=!1,t.prototype.autoAttach=!0,t.prototype.container=null,t.prototype.containerMethod="append",t.prototype.regions=null,t.prototype.region=null,t.prototype.subviews=null,t.prototype.subviewsByName=null,t.prototype.stale=!1,t.prototype.delegate=function(e,t,n){var r,i,s,o,u,f=this;if("string"!=typeof e)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)s=t;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(u=t,"string"!=typeof u)throw new TypeError("View#delegate: second argument must be a string");s=n}if("function"!=typeof s)throw new TypeError("View#delegate: handler argument must be function");return o=a.map(e.split(" "),function(e){return""+e+".delegate"+f.cid}),i=o.join(" "),r=a.bind(s,this),this.$el.on(i,u||null,r),r},t.prototype._delegateEvents=function(e){var t,n,r,i,s,o,u;for(i in e){if(u=e[i],r="function"==typeof u?u:this[u],!r)throw Error("Method '"+r+"' does not exist");s=i.match(/^(\S+)\s*(.*)$/),n=""+s[1]+".delegateEvents"+this.cid,o=s[2],t=a.bind(r,this),this.$el.on(n,o||null,t)}},t.prototype.delegateEvents=function(e){var t,n,r,i;if(this.undelegateEvents(),e)return this._delegateEvents(e),void 0;for(i=u.getAllPropertyVersions(this,"events"),n=0,r=i.length;r>n;n++){if(t=i[n],"function"==typeof t)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(t)}},t.prototype.undelegate=function(){return this.$el.unbind(".delegate"+this.cid)},t.prototype.delegateListeners=function(){var e,t,n,r,i,s,o,a,f;if(this.listen)for(a=u.getAllPropertyVersions(this,"listen"),s=0,o=a.length;o>s;s++){i=a[s];for(t in i){if(n=i[t],"function"!=typeof n&&(n=this[n]),"function"!=typeof n)throw Error("View#delegateListeners: "+(""+n+" must be function"));f=t.split(" "),e=f[0],r=f[1],this.delegateListener(e,r,n)}}},t.prototype.delegateListener=function(e,t,n){var r;"model"===t||"collection"===t?(r=this[t],r&&this.listenTo(r,e,n)):"mediator"===t?this.subscribeEvent(e,n):t||this.on(e,n,this)},t.prototype.registerRegion=function(e,t){return this.publishEvent("!region:register",this,t,e)},t.prototype.unregisterRegion=function(e){return this.publishEvent("!region:unregister",this,e)},t.prototype.unregisterAllRegions=function(){return this.publishEvent("!region:unregister",this)},t.prototype.subview=function(e,t){return e&&t?(this.removeSubview(e),this.subviews.push(t),this.subviewsByName[e]=t,t):e?this.subviewsByName[e]:void 0},t.prototype.removeSubview=function(e){var t,n,r,i,s,o;if(e){if("string"==typeof e)n=e,s=this.subviewsByName[n];else{s=e,o=this.subviewsByName;for(r in o)if(i=o[r],s===i){n=r;break}}if(n&&s&&s.dispose)return s.dispose(),t=a(this.subviews).indexOf(s),t>-1&&this.subviews.splice(t,1),delete this.subviewsByName[n]}},t.prototype.getTemplateData=function(){var e,t;return e=this.model?u.serialize(this.model):this.collection?{items:u.serialize(this.collection),length:this.collection.length}:{},t=this.model||this.collection,t&&("function"!=typeof t.state||"resolved"in e||(e.resolved="resolved"===t.state()),"function"!=typeof t.isSynced||"synced"in e||(e.synced=t.isSynced())),e},t.prototype.getTemplateFunction=function(){throw Error("View#getTemplateFunction must be overridden")},t.prototype.render=function(){var e,t;return this.disposed?!1:(t=this.getTemplateFunction(),"function"==typeof t&&(e=t(this.getTemplateData()),this.$el.html(e)),this.renderIsWrapped||this.attach(),this)},t.prototype.attach=function(){return null!=this.region&&this.publishEvent("!region:show",this.region,this),this.container?(r(this.container)[this.containerMethod](this.el),this.trigger("addedToDOM")):void 0},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,n,r,i,s,o,u;if(!this.disposed){if(null==this.subviews)throw Error("Your `initialize` method must include a super call to      Chaplin `initialize`");for(this.unregisterAllRegions(),u=this.subviews,r=0,s=u.length;s>r;r++)n=u[r],n.dispose();for(this.unsubscribeAllEvents(),this.stopListening(),this.off(),this.$el.remove(),t=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],i=0,o=t.length;o>i;i++)e=t[i],delete this[e];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},t}(i.View)}}),require.define({"chaplin/views/collection_view":function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty,l=function(e,t){function n(){this.constructor=e}for(var r in t)f.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};u=t("underscore"),i=t("backbone"),o=t("chaplin/views/view"),r=i.$,n.exports=s=function(e){function t(e){this.renderAllItems=a(this.renderAllItems,this),this.toggleFallback=a(this.toggleFallback,this),this.itemsReset=a(this.itemsReset,this),this.itemRemoved=a(this.itemRemoved,this),this.itemAdded=a(this.itemAdded,this),e&&u(this).extend(u.pick(e,["renderItems","itemView"])),this.visibleItems=[],t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.itemView=null,t.prototype.autoRender=!0,t.prototype.renderItems=!0,t.prototype.animationDuration=500,t.prototype.useCssAnimation=!1,t.prototype.animationStartClass="animated-item-view",t.prototype.animationEndClass="animated-item-view-end",t.prototype.listSelector=null,t.prototype.$list=null,t.prototype.fallbackSelector=null,t.prototype.$fallback=null,t.prototype.loadingSelector=null,t.prototype.$loading=null,t.prototype.itemSelector=null,t.prototype.filterer=null,t.prototype.filterCallback=function(e,t){return e.$el.stop(!0,!0).toggle(t)},t.prototype.visibleItems=null,t.prototype.initialize=function(e){return null==e&&(e={}),this.addCollectionListeners(),null!=e.filterer?this.filter(e.filterer):void 0},t.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},t.prototype.getTemplateData=function(){var e;return e={length:this.collection.length},"function"==typeof this.collection.state&&(e.resolved="resolved"===this.collection.state()),"function"==typeof this.collection.isSynced&&(e.synced=this.collection.isSynced()),e},t.prototype.getTemplateFunction=function(){},t.prototype.render=function(){return t.__super__.render.apply(this,arguments),this.$list=this.listSelector?this.$(this.listSelector):this.$el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},t.prototype.itemAdded=function(e,t,n){return null==n&&(n={}),this.insertView(e,this.renderItem(e),n.index)},t.prototype.itemRemoved=function(e){return this.removeViewForItem(e)},t.prototype.itemsReset=function(){return this.renderAllItems()},t.prototype.initFallback=function(){return this.fallbackSelector?(this.$fallback=this.$(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},t.prototype.toggleFallback=function(){var e;return e=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),this.$fallback.toggle(e)},t.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(this.$loading=this.$(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},t.prototype.toggleLoadingIndicator=function(){var e;return e=0===this.collection.length&&this.collection.isSyncing(),this.$loading.toggle(e)},t.prototype.getItemViews=function(){var e,t,n,r;e={},r=this.subviewsByName;for(t in r)n=r[t],"itemView:"===t.slice(0,9)&&(e[t.slice(9)]=n);return e},t.prototype.filter=function(e,t){var n,r,i,s,o,a,f;if(this.filterer=e,t&&(this.filterCallback=t),null==t&&(t=this.filterCallback),!u(this.getItemViews()).isEmpty())for(f=this.collection.models,r=o=0,a=f.length;a>o;r=++o){if(i=f[r],n="function"==typeof e?e(i,r):!0,s=this.subview("itemView:"+i.cid),!s)throw Error("CollectionView#filter: "+("no view found for "+i.cid));this.filterCallback(s,n),this.updateVisibleItems(s.model,n,!1)}return this.trigger("visibilityChange",this.visibleItems)},t.prototype.renderAllItems=function(){var e,t,n,r,i,s,o,u,a,l,c;for(r=this.collection.models,this.visibleItems=[],i={},o=0,a=r.length;a>o;o++)n=r[o],s=this.subview("itemView:"+n.cid),s&&(i[n.cid]=s);c=this.getItemViews();for(e in c)f.call(c,e)&&(s=c[e],e in i||this.removeSubview("itemView:"+e));for(t=u=0,l=r.length;l>u;t=++u)n=r[t],s=this.subview("itemView:"+n.cid),s?this.insertView(n,s,t,!1):this.insertView(n,this.renderItem(n),t);return 0===r.length?this.trigger("visibilityChange",this.visibleItems):void 0},t.prototype.renderItem=function(e){var t;return t=this.subview("itemView:"+e.cid),t||(t=this.initItemView(e),this.subview("itemView:"+e.cid,t)),t.render(),t},t.prototype.initItemView=function(e){if(this.itemView)return new this.itemView({model:e,autoRender:!1});throw Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},t.prototype.insertView=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p=this;null==n&&(n=null),null==r&&(r=!0),0===this.animationDuration&&(r=!1),c="number"==typeof n?n:this.collection.indexOf(e),f="function"==typeof this.filterer?this.filterer(e,c):!0,h=t.el,u=t.$el,f&&r&&(this.useCssAnimation?u.addClass(this.animationStartClass):u.css("opacity",0)),this.filterer&&this.filterCallback(t,f),i=this.$list,a=this.itemSelector?i.children(this.itemSelector):i.children(),a.get(c)!==h&&(l=a.length,0===l||c===l?i.append(h):0===c?(s=a.eq(c),s.before(h)):(o=a.eq(c-1),o.after(h))),t.trigger("addedToParent"),this.updateVisibleItems(e,f),f&&r&&(this.useCssAnimation?setTimeout(function(){return u.addClass(p.animationEndClass)},0):u.animate({opacity:1},this.animationDuration))},t.prototype.removeViewForItem=function(e){return this.updateVisibleItems(e,!1),this.removeSubview("itemView:"+e.cid)},t.prototype.updateVisibleItems=function(e,t,n){var r,i,s;return null==n&&(n=!0),i=!1,s=u(this.visibleItems).indexOf(e),r=s>-1,t&&!r?(this.visibleItems.push(e),i=!0):!t&&r&&(this.visibleItems.splice(s,1),i=!0),i&&n&&this.trigger("visibilityChange",this.visibleItems),i},t.prototype.dispose=function(){var e,n,r,i;if(!this.disposed){for(n=["$list","$fallback","$loading","visibleItems"],r=0,i=n.length;i>r;r++)e=n[r],delete this[e];return t.__super__.dispose.apply(this,arguments)}},t}(o)}}),require.define({"chaplin/lib/route":function(e,t,n){var r,i,s,o,u,a=function(e,t){return function(){return e.apply(t,arguments)}},f={}.hasOwnProperty;u=t("underscore"),r=t("backbone"),s=t("chaplin/lib/event_broker"),i=t("chaplin/controllers/controller"),n.exports=o=function(){function e(e,t,n,r){if(this.pattern=e,this.controller=t,this.action=n,this.handler=a(this.handler,this),this.addParamName=a(this.addParamName,this),this.options=r?u.clone(r):{},null!=this.options.name&&(this.name=this.options.name),this.paramNames=[],u(i.prototype).has(this.action))throw Error("Route: You should not use existing controller properties as action names");this.createRegExp()}var t,n,o;return e.extend=r.Model.extend,u(e.prototype).extend(s),t=/[-[\]{}()+?.,\\^$|#\s]/g,n="&",o="=",e.prototype.reverse=function(e){var t,n,r,i,s,o,a,f;if(i=this.pattern,u.isRegExp(i))return!1;if(r="Route#reverse: Not enough parameters to reverse",u.isArray(e)){if(e.length<this.paramNames.length)throw Error(r);t=0,i=i.replace(/[:*][^\/\?]+/g,function(){var n;return n=e[t],t+=1,n})}else for(f=this.paramNames,o=0,a=f.length;a>o;o++){if(n=f[o],s=e[n],void 0===s)throw Error(r);i=i.replace(RegExp("[:*]"+n,"g"),s)}return this.test(i)?i:!1},e.prototype.createRegExp=function(){var e;return u.isRegExp(this.pattern)?(this.regExp=this.pattern,u.isArray(this.options.names)&&(this.paramNames=this.options.names),void 0):(e=this.pattern.replace(t,"\\$&").replace(/(?::|\*)(\w+)/g,this.addParamName),this.regExp=RegExp("^"+e+"(?=\\?|$)"))},e.prototype.addParamName=function(e,t){return this.paramNames.push(t),":"===e.charAt(0)?"([^/?]+)":"(.*?)"},e.prototype.test=function(e){var t,n,r,i,s;if(r=this.regExp.test(e),!r)return!1;if(n=this.options.constraints){s=this.extractParams(e);for(i in n)if(f.call(n,i)&&(t=n[i],!t.test(s[i])))return!1}return!0},e.prototype.handler=function(e,t){var n,r,i;return t=t?u.clone(t):{},r=null!=(i=t.queryString)?i:this.getCurrentQueryString(),n=this.buildParams(e,r),t.path=e,this.publishEvent("matchRoute",this,n,t)},e.prototype.getCurrentQueryString=function(){return location.search.substring(1)},e.prototype.buildParams=function(e,t){return u.extend({},this.extractQueryParams(t),this.extractParams(e),this.options.params)},e.prototype.extractParams=function(e){var t,n,r,i,s,o,u,a;for(s={},r=this.regExp.exec(e),a=r.slice(1),t=o=0,u=a.length;u>o;t=++o)n=a[t],i=this.paramNames.length?this.paramNames[t]:t,s[i]=n;return s},e.prototype.extractQueryParams=function(e){var t,r,i,s,u,a,f,l,c;if(u={},!e)return u;for(s=e.split(n),f=0,l=s.length;l>f;f++)i=s[f],i.length&&(c=i.split(o),r=c[0],a=c[1],r.length&&(r=decodeURIComponent(r),a=decodeURIComponent(a),t=u[r],t?t.push?t.push(a):u[r]=[t,a]:u[r]=a));return u},e}()}}),require.define({"chaplin/lib/router":function(e,t,n){var r,i,s,o,u,a,f=function(e,t){return function(){return e.apply(t,arguments)}};a=t("underscore"),r=t("backbone"),i=t("chaplin/lib/event_broker"),s=t("chaplin/lib/route"),u=t("chaplin/lib/utils"),n.exports=o=function(){function e(e){this.options=null!=e?e:{},this.route=f(this.route,this),this.match=f(this.match,this),a(this.options).defaults({pushState:!0,root:"/"}),this.removeRoot=RegExp("^"+u.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.routeHandler),this.subscribeEvent("!router:routeByName",this.routeByNameHandler),this.subscribeEvent("!router:reverse",this.reverseHandler),this.subscribeEvent("!router:changeURL",this.changeURLHandler),this.createHistory()}return e.extend=r.Model.extend,a(e.prototype).extend(i),e.prototype.createHistory=function(){return r.history||(r.history=new r.History)},e.prototype.startHistory=function(){return r.history.start(this.options)},e.prototype.stopHistory=function(){return r.History.started?r.history.stop():void 0},e.prototype.match=function(e,t,n){var i,o,u,a;if(null==n&&(n={}),2===arguments.length&&"object"==typeof t){if(n=t,o=n.controller,i=n.action,!o||!i)throw Error("Router#match must receive either target or options.controller & options.action")}else{if(o=n.controller,i=n.action,o||i)throw Error("Router#match cannot use both target and options.controller / options.action");a=t.split("#"),o=a[0],i=a[1]}return u=new s(e,o,i,n),r.history.handlers.push({route:u,callback:u.handler}),u},e.prototype.route=function(e,t){var n,i,s,o;for(t=t?a.clone(t):{},a(t).defaults({changeURL:!0}),e=e.replace(this.removeRoot,""),o=r.history.handlers,i=0,s=o.length;s>i;i++)if(n=o[i],n.route.test(e))return n.callback(e,t),!0;return!1},e.prototype.routeHandler=function(e,t,n){var r;return 2===arguments.length&&"function"==typeof t&&(n=t,t={}),r=this.route(e,t),"function"==typeof n?n(r):void 0},e.prototype.routeByNameHandler=function(e,t,n,r){var i,s;return 3===arguments.length&&"function"==typeof n&&(r=n,n={}),i=this.reverse(e,t),"string"==typeof i?(s=this.route(i,n),"function"==typeof r?r(s):void 0):"function"==typeof r?r(!1):void 0},e.prototype.reverse=function(e,t){var n,i,s,o,u;for(u=r.history.handlers,s=0,o=u.length;o>s;s++)if(n=u[s],n.route.name===e&&(i=n.route.reverse(t),i!==!1))return i;return!1},e.prototype.reverseHandler=function(e,t,n){return n(this.reverse(e,t))},e.prototype.changeURL=function(e,t){var n;return null==t&&(t={}),n={trigger:t.trigger===!0,replace:t.replace===!0},r.history.navigate(e,n)},e.prototype.changeURLHandler=function(e,t){return this.changeURL(e,t)},e.prototype.disposed=!1,e.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete r.history,this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},e}()}}),require.define({"chaplin/lib/delayer":function(e,t,n){var r;r={setTimeout:function(e,t,n){var r,i,s,o=this;return null==(s=this.timeouts)&&(this.timeouts={}),this.clearTimeout(e),i=function(){return delete o.timeouts[e],n()},r=setTimeout(i,t),this.timeouts[e]=r,r},clearTimeout:function(e){this.timeouts&&null!=this.timeouts[e]&&(clearTimeout(this.timeouts[e]),delete this.timeouts[e])},clearAllTimeouts:function(){var e,t,n;if(this.timeouts){n=this.timeouts;for(t in n)e=n[t],this.clearTimeout(t)}},setInterval:function(e,t,n){var r,i;return this.clearInterval(e),null==(i=this.intervals)&&(this.intervals={}),r=setInterval(n,t),this.intervals[e]=r,r},clearInterval:function(e){this.intervals&&this.intervals[e]&&(clearInterval(this.intervals[e]),delete this.intervals[e])},clearAllIntervals:function(){var e,t,n;if(this.intervals){n=this.intervals;for(t in n)e=n[t],this.clearInterval(t)}},clearDelayed:function(){this.clearAllTimeouts(),this.clearAllIntervals()}},"function"==typeof Object.freeze&&Object.freeze(r),n.exports=r}}),require.define({"chaplin/lib/event_broker":function(e,t,n){var r,i,s=[].slice;i=t("chaplin/mediator"),r={subscribeEvent:function(e,t){if("string"!=typeof e)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof t)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return i.unsubscribe(e,t,this),i.subscribe(e,t,this)},unsubscribeEvent:function(e,t){if("string"!=typeof e)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof t)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return i.unsubscribe(e,t)},unsubscribeAllEvents:function(){return i.unsubscribe(null,null,this)},publishEvent:function(){var e,t;if(t=arguments[0],e=arguments.length>=2?s.call(arguments,1):[],"string"!=typeof t)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return i.publish.apply(i,[t].concat(s.call(e)))}},"function"==typeof Object.freeze&&Object.freeze(r),n.exports=r}}),require.define({"chaplin/lib/support":function(e,t,n){var r;r={propertyDescriptors:function(){var e;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return e={},Object.defineProperty(e,"foo",{value:"bar"}),"bar"===e.foo}catch(t){return!1}}()},n.exports=r}}),require.define({"chaplin/lib/composition":function(e,t,n){var r,i,s,o,u={}.hasOwnProperty;o=t("underscore"),r=t("backbone"),s=t("chaplin/lib/event_broker"),n.exports=i=function(){function e(e){null!=e&&(this.options=o.clone(e)),this.item=this,this.initialize(this.options)}return e.extend=r.Model.extend,o(e.prototype).extend(r.Events),o(e.prototype).extend(s),e.prototype.item=null,e.prototype.options=null,e.prototype._stale=!1,e.prototype.initialize=function(){},e.prototype.compose=function(){},e.prototype.check=function(e){return o.isEqual(this.options,e)},e.prototype.stale=function(e){var t,n;if(null==e)return this._stale;this._stale=e;for(n in this)t=this[n],t&&t!==this&&o(t).has("stale")&&(t.stale=e)},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t,n,r,i;if(!this.disposed){for(t in this)u.call(this,t)&&(e=this[t],e&&"function"==typeof e.dispose&&e!==this&&(e.dispose(),delete this[t]));for(this.unsubscribeAllEvents(),this.stopListening(),n=["redirected"],r=0,i=n.length;i>r;r++)t=n[r],delete this[t];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},e}()}}),require.define({"chaplin/lib/sync_machine":function(e,t,n){var r,i,s,o,u,a,f,l,c,h;for(u="unsynced",s="syncing",i="synced",r="syncStateChange",o={_syncState:u,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===u},isSynced:function(){return this._syncState===i},isSyncing:function(){return this._syncState===s},unsync:function(){var e;((e=this._syncState)===s||e===i)&&(this._previousSync=this._syncState,this._syncState=u,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},beginSync:function(){var e;((e=this._syncState)===u||e===i)&&(this._previousSync=this._syncState,this._syncState=s,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},finishSync:function(){this._syncState===s&&(this._previousSync=this._syncState,this._syncState=i,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},abortSync:function(){this._syncState===s&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))}},h=[u,s,i,r],f=function(e){return o[e]=function(t,n){return null==n&&(n=this),this.on(e,t,n),this._syncState===e?t.call(n):void 0}},l=0,c=h.length;c>l;l++)a=h[l],f(a);"function"==typeof Object.freeze&&Object.freeze(o),n.exports=o}}),require.define({"chaplin/lib/utils":function(e,t,n){var r,i,s,o=[].slice,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};s=t("underscore"),r=t("chaplin/lib/support"),i={beget:function(){var e;return"function"==typeof Object.create?Object.create:(e=function(){},function(t){return e.prototype=t,new e})}(),serialize:function(e){if("function"==typeof e.serialize)return e.serialize();if("function"==typeof e.toJSON)return e.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var e;return r.propertyDescriptors?(e={writable:!1,enumerable:!0,configurable:!1},function(){var t,n,r,i,s;for(t=arguments[0],r=arguments.length>=2?o.call(arguments,1):[],i=0,s=r.length;s>i;i++)n=r[i],e.value=t[n],Object.defineProperty(t,n,e);return!0}):function(){return!1}}(),getPrototypeChain:function(e){var t,n;for(t=[e.constructor.prototype];e=null!=(n=e.constructor)?n.__super__:void 0;)t.push(e);return t},getAllPropertyVersions:function(e,t){var n,r,s,o,a,f;for(r=[],f=i.getPrototypeChain(e),o=0,a=f.length;a>o;o++)n=f[o],s=n[t],s&&0>u.call(r,s)&&r.push(s);return r.reverse()},upcase:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},underscorize:function(e){return e.replace(/[A-Z]/g,function(e,t){return(0!==t?"_":"")+e.toLowerCase()})},escapeRegExp:function(e){return((e||"")+"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(e){return e.shiftKey||e.altKey||e.ctrlKey||e.metaKey}},"function"==typeof Object.seal&&Object.seal(i),n.exports=i}}),require.define({chaplin:function(e,t,n){n.exports={Application:t("chaplin/application"),mediator:t("chaplin/mediator"),Dispatcher:t("chaplin/dispatcher"),Controller:t("chaplin/controllers/controller"),Composer:t("chaplin/composer"),Composition:t("chaplin/lib/composition"),Collection:t("chaplin/models/collection"),Model:t("chaplin/models/model"),Layout:t("chaplin/views/layout"),View:t("chaplin/views/view"),CollectionView:t("chaplin/views/collection_view"),Route:t("chaplin/lib/route"),Router:t("chaplin/lib/router"),Delayer:t("chaplin/lib/delayer"),EventBroker:t("chaplin/lib/event_broker"),support:t("chaplin/lib/support"),SyncMachine:t("chaplin/lib/sync_machine"),utils:t("chaplin/lib/utils")}}});