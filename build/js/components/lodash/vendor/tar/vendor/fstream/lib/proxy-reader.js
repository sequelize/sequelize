function ProxyReader(e){var t=this;if(!(t instanceof ProxyReader))throw new Error("ProxyReader must be called as constructor.");t.props=e,t._buffer=[],t.ready=!1,Reader.call(t,e)}module.exports=ProxyReader;var Reader=require("./reader.js"),getType=require("./get-type.js"),inherits=require("../../inherits/inherits.js"),fs=require("../../graceful-fs/graceful-fs.js");inherits(ProxyReader,Reader),ProxyReader.prototype._stat=function(){var e=this,t=e.props,n=t.follow?"stat":"lstat";fs[n](t.path,function(n,r){var i;n||!r?i="File":i=getType(r),t[i]=!0,t.type=e.type=i,e._old=r,e._addProxy(Reader(t,r))})},ProxyReader.prototype._addProxy=function(e){var t=this;if(t._proxyTarget)return t.error("proxy already set");t._proxyTarget=e,e._proxy=t,["error","data","end","close","linkpath","entry","entryEnd","child","childEnd","warn","stat"].forEach(function(n){e.on(n,t.emit.bind(t,n))}),t.emit("proxy",e),e.on("ready",function(){t.ready=!0,t.emit("ready")});var n=t._buffer;t._buffer.length=0,n.forEach(function(t){e[t[0]].apply(e,t[1])})},ProxyReader.prototype.pause=function(){return this._proxyTarget?this._proxyTarget.pause():!1},ProxyReader.prototype.resume=function(){return this._proxyTarget?this._proxyTarget.resume():!1};