(function(){var deps={backbone:window.Backbone,underscore:window._};for(var name in deps)(function(name){var definition={};definition[name]=function(exports,require,module){module.exports=deps[name]};try{require(item)}catch(e){require.define(definition)}})(name)})(),require.define({"chaplin/application":function(exports,require,module){"use strict";var Application,Backbone,Composer,Dispatcher,EventBroker,Layout,Router,mediator,_;_=require("underscore"),Backbone=require("backbone"),mediator=require("chaplin/mediator"),Dispatcher=require("chaplin/dispatcher"),Layout=require("chaplin/views/layout"),Composer=require("chaplin/composer"),Router=require("chaplin/lib/router"),EventBroker=require("chaplin/lib/event_broker"),module.exports=Application=function(){function Application(){}return Application.extend=Backbone.Model.extend,_(Application.prototype).extend(EventBroker),Application.prototype.title="",Application.prototype.dispatcher=null,Application.prototype.layout=null,Application.prototype.router=null,Application.prototype.composer=null,Application.prototype.initialize=function(){},Application.prototype.initDispatcher=function(options){return this.dispatcher=new Dispatcher(options)},Application.prototype.initLayout=function(options){var _ref;return null==options&&(options={}),null==(_ref=options.title)&&(options.title=this.title),this.layout=new Layout(options)},Application.prototype.initComposer=function(options){return null==options&&(options={}),this.composer=new Composer(options)},Application.prototype.initRouter=function(routes,options){return this.router=new Router(options),"function"==typeof routes&&routes(this.router.match),this.router.startHistory()},Application.prototype.disposed=!1,Application.prototype.dispose=function(){var prop,properties,_i,_len;if(!this.disposed){for(properties=["dispatcher","layout","router","composer"],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],null!=this[prop]&&(this[prop].dispose(),delete this[prop]);return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},Application}()}}),require.define({"chaplin/mediator":function(exports,require,module){"use strict";var Backbone,mediator,support,utils;Backbone=require("backbone"),support=require("chaplin/lib/support"),utils=require("chaplin/lib/utils"),mediator={},mediator.subscribe=Backbone.Events.on,mediator.unsubscribe=Backbone.Events.off,mediator.publish=Backbone.Events.trigger,mediator._callbacks=null,utils.readonly(mediator,"subscribe","unsubscribe","publish"),mediator.seal=function(){return support.propertyDescriptors&&Object.seal?Object.seal(mediator):void 0},utils.readonly(mediator,"seal"),module.exports=mediator}}),require.define({"chaplin/dispatcher":function(exports,require,module){"use strict";var Backbone,Dispatcher,EventBroker,utils,_;_=require("underscore"),Backbone=require("backbone"),utils=require("chaplin/lib/utils"),EventBroker=require("chaplin/lib/event_broker"),module.exports=Dispatcher=function(){function Dispatcher(){this.initialize.apply(this,arguments)}return Dispatcher.extend=Backbone.Model.extend,_(Dispatcher.prototype).extend(EventBroker),Dispatcher.prototype.previousControllerName=null,Dispatcher.prototype.currentControllerName=null,Dispatcher.prototype.currentController=null,Dispatcher.prototype.currentAction=null,Dispatcher.prototype.currentParams=null,Dispatcher.prototype.url=null,Dispatcher.prototype.initialize=function(options){return null==options&&(options={}),this.settings=_(options).defaults({controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("matchRoute",this.matchRouteHandler)},Dispatcher.prototype.matchRouteHandler=function(route,params,options){return this.startupController(route.controller,route.action,params,options)},Dispatcher.prototype.startupController=function(controllerName,action,params,options){var _this=this;return null==action&&(action="index"),params=params?_.clone(params):{},options=options?_.clone(options):{},options.changeURL!==!1&&(options.changeURL=!0),options.forceStartup!==!0&&(options.forceStartup=!1),options.forceStartup||this.currentControllerName!==controllerName||this.currentAction!==action||this.currentParams&&!_(params).isEqual(this.currentParams)?this.loadController(controllerName,function(ControllerConstructor){return _this.controllerLoaded(controllerName,action,params,options,ControllerConstructor)}):void 0},Dispatcher.prototype.loadController=function(controllerName,handler){var fileName,moduleName;return fileName=utils.underscorize(controllerName)+this.settings.controllerSuffix,moduleName=this.settings.controllerPath+fileName,("undefined"!=typeof define&&null!==define?define.amd:void 0)?require([moduleName],handler):handler(require(moduleName))},Dispatcher.prototype.controllerLoaded=function(controllerName,action,params,options,ControllerConstructor){var controller,methodName;return controller=new ControllerConstructor(params,options),methodName=controller.beforeAction?"executeBeforeActions":"executeAction",this[methodName](controller,controllerName,action,params,options)},Dispatcher.prototype.executeAction=function(controller,controllerName,action,params,options){var currentController,currentControllerName;return currentControllerName=this.currentControllerName||null,currentController=this.currentController||null,this.previousControllerName=currentControllerName,currentController&&(this.publishEvent("beforeControllerDispose",currentController),currentController.dispose(params,controllerName)),options.previousControllerName=currentControllerName,controller[action](params,options),controller.redirected?void 0:(this.currentControllerName=controllerName,this.currentController=controller,this.currentAction=action,this.currentParams=params,this.adjustURL(params,options),this.publishEvent("startupController",{previousControllerName:this.previousControllerName,controller:this.currentController,controllerName:this.currentControllerName,params:this.currentParams,options:options}))},Dispatcher.prototype.executeBeforeActions=function(controller,controllerName,action,params,options){var acts,args,beforeAction,beforeActions,name,next,_i,_len,_ref,_this=this;for(beforeActions=[],args=arguments,_ref=utils.getAllPropertyVersions(controller,"beforeAction"),_i=0,_len=_ref.length;_len>_i;_i++){acts=_ref[_i];for(name in acts)if(beforeAction=acts[name],name===action||RegExp("^"+name+"$").test(action)){if("string"==typeof beforeAction&&(beforeAction=controller[beforeAction]),"function"!=typeof beforeAction)throw Error("Controller#executeBeforeActions: "+(""+beforeAction+" is not a valid beforeAction method for "+name+"."));beforeActions.push(beforeAction)}}return next=function(method,previous){return null==previous&&(previous=null),controller.redirected?void 0:method?(previous=method.call(controller,params,options,previous),previous&&"function"==typeof previous.then?previous.then(function(data){return _this.currentController&&controller!==_this.currentController?void 0:next(beforeActions.shift(),data)}):next(beforeActions.shift(),previous)):(_this.executeAction.apply(_this,args),void 0)},next(beforeActions.shift())},Dispatcher.prototype.adjustURL=function(params,options){var url;if(null!=options.path)return url=options.path+(options.queryString?"?"+options.queryString:""),options.changeURL&&this.publishEvent("!router:changeURL",url,options),this.url=url},Dispatcher.prototype.disposed=!1,Dispatcher.prototype.dispose=function(){return this.disposed?void 0:(this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},Dispatcher}()}}),require.define({"chaplin/composer":function(exports,require,module){"use strict";var Backbone,Composer,Composition,EventBroker,utils,_;_=require("underscore"),Backbone=require("backbone"),utils=require("chaplin/lib/utils"),Composition=require("chaplin/lib/composition"),EventBroker=require("chaplin/lib/event_broker"),module.exports=Composer=function(){function Composer(){this.initialize.apply(this,arguments)}return Composer.extend=Backbone.Model.extend,_(Composer.prototype).extend(EventBroker),Composer.prototype.compositions=null,Composer.prototype.initialize=function(options){return null==options&&(options={}),this.compositions={},this.subscribeEvent("!composer:compose",this.compose),this.subscribeEvent("!composer:retrieve",this.retrieve),this.subscribeEvent("startupController",this.cleanup)},Composer.prototype.compose=function(name,second,third){return"function"==typeof second?third||second.prototype.dispose?second.prototype instanceof Composition?this._compose(name,{composition:second,options:third}):this._compose(name,{options:third,compose:function(){var autoRender,disabledAutoRender;return this.item=new second(this.options),autoRender=this.item.autoRender,disabledAutoRender=void 0===autoRender||!autoRender,disabledAutoRender&&"function"==typeof this.item.render?this.item.render():void 0}}):this._compose(name,{compose:second}):"function"==typeof third?this._compose(name,{compose:third,options:second}):this._compose(name,second)},Composer.prototype._compose=function(name,options){var composition,current;if("function"!=typeof options.compose&&null==options.composition)throw Error("Composer#compose was used incorrectly");return null!=options.composition?composition=new options.composition(options.options):(composition=new Composition(options.options),composition.compose=options.compose,options.check&&(composition.check=options.check)),current=this.compositions[name],current&&current.check(composition.options)?current.stale(!1):(current&&current.dispose(),composition.compose(composition.options),composition.stale(!1),this.compositions[name]=composition),this.compositions[name]},Composer.prototype.retrieve=function(name,callback){var active,item;return active=this.compositions[name],item=active&&!active.stale()?active.item:void 0,callback(item)},Composer.prototype.cleanup=function(){var composition,name,_ref;_ref=this.compositions;for(name in _ref)composition=_ref[name],composition.stale()?(composition.dispose(),delete this.compositions[name]):composition.stale(!0)},Composer.prototype.dispose=function(){var composition,name,_ref;if(!this.disposed){this.unsubscribeAllEvents(),_ref=this.compositions;for(name in _ref)composition=_ref[name],composition.dispose();return delete this.compositions,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},Composer}()}}),require.define({"chaplin/controllers/controller":function(exports,require,module){"use strict";var Backbone,Controller,EventBroker,_,__hasProp={}.hasOwnProperty;_=require("underscore"),Backbone=require("backbone"),EventBroker=require("chaplin/lib/event_broker"),module.exports=Controller=function(){function Controller(){this.initialize.apply(this,arguments)}return Controller.extend=Backbone.Model.extend,_(Controller.prototype).extend(Backbone.Events),_(Controller.prototype).extend(EventBroker),Controller.prototype.view=null,Controller.prototype.redirected=!1,Controller.prototype.initialize=function(){},Controller.prototype.adjustTitle=function(subtitle){return this.publishEvent("!adjustTitle",subtitle)},Controller.prototype.compose=function(name,second,third){var item;return 1===arguments.length?(item=null,this.publishEvent("!composer:retrieve",name,function(composition){return item=composition}),item):this.publishEvent("!composer:compose",name,second,third)},Controller.prototype.redirectTo=function(url,options){return null==options&&(options={}),this.redirected=!0,this.publishEvent("!router:route",url,options,function(routed){if(!routed)throw Error("Controller#redirectTo: no route matched")})},Controller.prototype.redirectToRoute=function(name,params,options){return this.redirected=!0,this.publishEvent("!router:routeByName",name,params,options,function(routed){if(!routed)throw Error("Controller#redirectToRoute: no route matched")})},Controller.prototype.disposed=!1,Controller.prototype.dispose=function(){var obj,prop,properties,_i,_len;if(!this.disposed){for(prop in this)__hasProp.call(this,prop)&&(obj=this[prop],obj&&"function"==typeof obj.dispose&&(obj.dispose(),delete this[prop]));for(this.unsubscribeAllEvents(),this.stopListening(),properties=["redirected"],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},Controller}()}}),require.define({"chaplin/models/collection":function(exports,require,module){"use strict";var Backbone,Collection,EventBroker,Model,utils,_,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};_=require("underscore"),Backbone=require("backbone"),EventBroker=require("chaplin/lib/event_broker"),Model=require("chaplin/models/model"),utils=require("chaplin/lib/utils"),module.exports=Collection=function(_super){function Collection(){Collection.__super__.constructor.apply(this,arguments)}return __extends(Collection,_super),_(Collection.prototype).extend(EventBroker),Collection.prototype.model=Model,Collection.prototype.initDeferred=function(){return _(this).extend($.Deferred())},Collection.prototype.serialize=function(){return this.map(utils.serialize)},Collection.prototype.disposed=!1,Collection.prototype.dispose=function(){var prop,properties,_i,_len;if(!this.disposed){for(this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.stopListening(),this.off(),"function"==typeof this.reject&&this.reject(),properties=["model","models","_byId","_byCid","_callbacks"],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},Collection}(Backbone.Collection)}}),require.define({"chaplin/models/model":function(exports,require,module){"use strict";var Backbone,EventBroker,Model,serializeAttributes,serializeModelAttributes,utils,_,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};_=require("underscore"),Backbone=require("backbone"),utils=require("chaplin/lib/utils"),EventBroker=require("chaplin/lib/event_broker"),serializeAttributes=function(model,attributes,modelStack){var delegator,key,otherModel,serializedModels,value,_i,_len,_ref;delegator=utils.beget(attributes),null==modelStack&&(modelStack={}),modelStack[model.cid]=!0;for(key in attributes)if(value=attributes[key],value instanceof Backbone.Model)delegator[key]=serializeModelAttributes(value,model,modelStack);else if(value instanceof Backbone.Collection){for(serializedModels=[],_ref=value.models,_i=0,_len=_ref.length;_len>_i;_i++)otherModel=_ref[_i],serializedModels.push(serializeModelAttributes(otherModel,model,modelStack));delegator[key]=serializedModels}return delete modelStack[model.cid],delegator},serializeModelAttributes=function(model,currentModel,modelStack){var attributes;return model===currentModel||_(modelStack).has(model.cid)?null:(attributes="function"==typeof model.getAttributes?model.getAttributes():model.attributes,serializeAttributes(model,attributes,modelStack))},module.exports=Model=function(_super){function Model(){Model.__super__.constructor.apply(this,arguments)}return __extends(Model,_super),_(Model.prototype).extend(EventBroker),Model.prototype.initDeferred=function(){return _(this).extend($.Deferred())},Model.prototype.getAttributes=function(){return this.attributes},Model.prototype.serialize=function(){return serializeAttributes(this,this.getAttributes())},Model.prototype.disposed=!1,Model.prototype.dispose=function(){var prop,properties,_i,_len;if(!this.disposed){for(this.trigger("dispose",this),this.unsubscribeAllEvents(),this.stopListening(),this.off(),"function"==typeof this.reject&&this.reject(),properties=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},Model}(Backbone.Model)}}),require.define({"chaplin/views/layout":function(exports,require,module){"use strict";var $,Backbone,EventBroker,Layout,utils,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};_=require("underscore"),Backbone=require("backbone"),utils=require("chaplin/lib/utils"),EventBroker=require("chaplin/lib/event_broker"),$=Backbone.$,module.exports=Layout=function(){function Layout(){this.openLink=__bind(this.openLink,this),this.initialize.apply(this,arguments)}return Layout.extend=Backbone.Model.extend,_(Layout.prototype).extend(EventBroker),Layout.prototype.title="",Layout.prototype.events={},Layout.prototype.el=document,Layout.prototype.$el=$(document),Layout.prototype.cid="chaplin-layout",Layout.prototype.regions=null,Layout.prototype.initialize=function(options){return null==options&&(options={}),this.title=options.title,this.settings=_(options).defaults({titleTemplate:_.template("<%= subtitle %> â€“ <%= title %>"),openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),this.regions=[],this.subscribeEvent("beforeControllerDispose",this.hideOldView),this.subscribeEvent("startupController",this.showNewView),this.subscribeEvent("!adjustTitle",this.adjustTitle),this.subscribeEvent("!region:show",this.showRegion),this.subscribeEvent("!region:register",this.registerRegionHandler),this.subscribeEvent("!region:unregister",this.unregisterRegionHandler),this.settings.routeLinks&&this.startLinkRouting(),this.delegateEvents()},Layout.prototype.delegateEvents=Backbone.View.prototype.delegateEvents,Layout.prototype.undelegateEvents=Backbone.View.prototype.undelegateEvents,Layout.prototype.hideOldView=function(controller){var scrollTo,view;return scrollTo=this.settings.scrollTo,scrollTo&&window.scrollTo(scrollTo[0],scrollTo[1]),view=controller.view,view?view.$el.hide():void 0},Layout.prototype.showNewView=function(context){var view;return view=context.controller.view,view?view.$el.show():void 0},Layout.prototype.adjustTitle=function(subtitle){var title;return null==subtitle&&(subtitle=""),title=this.settings.titleTemplate({title:this.title,subtitle:subtitle}),setTimeout(function(){return document.title=title},50)},Layout.prototype.startLinkRouting=function(){return this.settings.routeLinks?$(document).on("click",this.settings.routeLinks,this.openLink):void 0},Layout.prototype.stopLinkRouting=function(){return this.settings.routeLinks?$(document).off("click",this.settings.routeLinks):void 0},Layout.prototype.openLink=function(event){var $el,callback,el,href,internal,isAnchor,options,path,queryString,skipRouting,type,_ref,_ref1,_ref2;if(!(utils.modifierKeyPressed(event)||(el=event.currentTarget,$el=$(el),isAnchor="A"===el.nodeName,href=$el.attr("href")||$el.data("href")||null,null===href||void 0===href||""===href||"#"===href.charAt(0)||isAnchor&&("_blank"===$el.attr("target")||"external"===$el.attr("rel")||"http:"!==(_ref=el.protocol)&&"https:"!==_ref&&"file:"!==_ref)||(skipRouting=this.settings.skipRouting,type=typeof skipRouting,"function"===type&&!skipRouting(href,el)||"string"===type&&$el.is(skipRouting))))){if(internal=!isAnchor||(_ref1=el.hostname)===location.hostname||""===_ref1,!internal)return this.settings.openExternalToBlank&&(event.preventDefault(),window.open(el.href)),void 0;isAnchor?(path=el.pathname,queryString=el.search.substring(1),"/"!==path.charAt(0)&&(path="/"+path)):(_ref2=href.split("?"),path=_ref2[0],queryString=_ref2[1],null==queryString&&(queryString="")),options={queryString:queryString},callback=function(routed){routed?event.preventDefault():isAnchor||(location.href=path)},this.publishEvent("!router:route",path,options,callback)}},Layout.prototype.registerRegionHandler=function(instance,name,selector){return null!=name?this.registerRegion(instance,name,selector):this.registerRegions(instance)},Layout.prototype.registerRegion=function(instance,name,selector){return this.unregisterRegion(instance,name),this.regions.unshift({instance:instance,name:name,selector:selector})},Layout.prototype.registerRegions=function(instance){var name,selector,version,_i,_len,_ref;for(_ref=utils.getAllPropertyVersions(instance,"regions"),_i=0,_len=_ref.length;_len>_i;_i++){version=_ref[_i];for(selector in version)name=version[selector],this.registerRegion(instance,name,selector)}},Layout.prototype.unregisterRegionHandler=function(instance,name){return null!=name?this.unregisterRegion(instance,name):this.unregisterRegions(instance)},Layout.prototype.unregisterRegion=function(instance,name){var cid;return cid=instance.cid,this.regions=_(this.regions).filter(function(region){return region.instance.cid!==cid||region.name!==name})},Layout.prototype.unregisterRegions=function(instance){return this.regions=_(this.regions).filter(function(region){return region.instance.cid!==instance.cid})},Layout.prototype.showRegion=function(name,instance){var region;if(region=_.find(this.regions,function(region){return region.name===name&&!region.instance.stale}),!region)throw Error("No region registered under "+name);return instance.container=region.instance.$el.find(region.selector)},Layout.prototype.disposed=!1,Layout.prototype.dispose=function(){return this.disposed?void 0:(delete this.regions,this.stopLinkRouting(),this.unsubscribeAllEvents(),this.undelegateEvents(),delete this.title,this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},Layout}()}}),require.define({"chaplin/views/view":function(exports,require,module){"use strict";var $,Backbone,EventBroker,View,utils,_,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};_=require("underscore"),Backbone=require("backbone"),utils=require("chaplin/lib/utils"),EventBroker=require("chaplin/lib/event_broker"),$=Backbone.$,module.exports=View=function(_super){function View(options){var render,_this=this;options&&_(this).extend(_.pick(options,["autoAttach","autoRender","container","containerMethod","region"])),this.render===View.prototype.render?this.render=_(this.render).bind(this):(render=this.render,this.renderIsWrapped=!0,this.render=function(){return _this.disposed?!1:(render.apply(_this,arguments),_this.autoAttach&&_this.attach.apply(_this,arguments),_this)}),this.subviews=[],this.subviewsByName={},View.__super__.constructor.apply(this,arguments),this.delegateListeners(),this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",this.dispose),null!=this.regions&&this.publishEvent("!region:register",this),this.autoRender&&this.render()}return __extends(View,_super),_(View.prototype).extend(EventBroker),View.prototype.autoRender=!1,View.prototype.autoAttach=!0,View.prototype.container=null,View.prototype.containerMethod="append",View.prototype.regions=null,View.prototype.region=null,View.prototype.subviews=null,View.prototype.subviewsByName=null,View.prototype.stale=!1,View.prototype.delegate=function(eventName,second,third){var bound,events,handler,list,selector,_this=this;if("string"!=typeof eventName)throw new TypeError("View#delegate: first argument must be a string");if(2===arguments.length)handler=second;else{if(3!==arguments.length)throw new TypeError("View#delegate: only two or three arguments are allowed");if(selector=second,"string"!=typeof selector)throw new TypeError("View#delegate: second argument must be a string");handler=third}if("function"!=typeof handler)throw new TypeError("View#delegate: handler argument must be function");return list=_.map(eventName.split(" "),function(event){return""+event+".delegate"+_this.cid}),events=list.join(" "),bound=_.bind(handler,this),this.$el.on(events,selector||null,bound),bound},View.prototype._delegateEvents=function(events){var bound,eventName,handler,key,match,selector,value;for(key in events){if(value=events[key],handler="function"==typeof value?value:this[value],!handler)throw Error("Method '"+handler+"' does not exist");match=key.match(/^(\S+)\s*(.*)$/),eventName=""+match[1]+".delegateEvents"+this.cid,selector=match[2],bound=_.bind(handler,this),this.$el.on(eventName,selector||null,bound)}},View.prototype.delegateEvents=function(events){var classEvents,_i,_len,_ref;if(this.undelegateEvents(),events)return this._delegateEvents(events),void 0;for(_ref=utils.getAllPropertyVersions(this,"events"),_i=0,_len=_ref.length;_len>_i;_i++){if(classEvents=_ref[_i],"function"==typeof classEvents)throw new TypeError("View#delegateEvents: functions are not supported");this._delegateEvents(classEvents)}},View.prototype.undelegate=function(){return this.$el.unbind(".delegate"+this.cid)},View.prototype.delegateListeners=function(){var eventName,key,method,target,version,_i,_len,_ref,_ref1;if(this.listen)for(_ref=utils.getAllPropertyVersions(this,"listen"),_i=0,_len=_ref.length;_len>_i;_i++){version=_ref[_i];for(key in version){if(method=version[key],"function"!=typeof method&&(method=this[method]),"function"!=typeof method)throw Error("View#delegateListeners: "+(""+method+" must be function"));_ref1=key.split(" "),eventName=_ref1[0],target=_ref1[1],this.delegateListener(eventName,target,method)}}},View.prototype.delegateListener=function(eventName,target,callback){var prop;"model"===target||"collection"===target?(prop=this[target],prop&&this.listenTo(prop,eventName,callback)):"mediator"===target?this.subscribeEvent(eventName,callback):target||this.on(eventName,callback,this)},View.prototype.registerRegion=function(selector,name){return this.publishEvent("!region:register",this,name,selector)},View.prototype.unregisterRegion=function(name){return this.publishEvent("!region:unregister",this,name)},View.prototype.unregisterAllRegions=function(){return this.publishEvent("!region:unregister",this)},View.prototype.subview=function(name,view){return name&&view?(this.removeSubview(name),this.subviews.push(view),this.subviewsByName[name]=view,view):name?this.subviewsByName[name]:void 0},View.prototype.removeSubview=function(nameOrView){var index,name,otherName,otherView,view,_ref;if(nameOrView){if("string"==typeof nameOrView)name=nameOrView,view=this.subviewsByName[name];else{view=nameOrView,_ref=this.subviewsByName;for(otherName in _ref)if(otherView=_ref[otherName],view===otherView){name=otherName;break}}if(name&&view&&view.dispose)return view.dispose(),index=_(this.subviews).indexOf(view),index>-1&&this.subviews.splice(index,1),delete this.subviewsByName[name]}},View.prototype.getTemplateData=function(){var data,source;return data=this.model?utils.serialize(this.model):this.collection?{items:utils.serialize(this.collection),length:this.collection.length}:{},source=this.model||this.collection,source&&("function"!=typeof source.state||"resolved"in data||(data.resolved="resolved"===source.state()),"function"!=typeof source.isSynced||"synced"in data||(data.synced=source.isSynced())),data},View.prototype.getTemplateFunction=function(){throw Error("View#getTemplateFunction must be overridden")},View.prototype.render=function(){var html,templateFunc;return this.disposed?!1:(templateFunc=this.getTemplateFunction(),"function"==typeof templateFunc&&(html=templateFunc(this.getTemplateData()),this.$el.html(html)),this.renderIsWrapped||this.attach(),this)},View.prototype.attach=function(){return null!=this.region&&this.publishEvent("!region:show",this.region,this),this.container?($(this.container)[this.containerMethod](this.el),this.trigger("addedToDOM")):void 0},View.prototype.disposed=!1,View.prototype.dispose=function(){var prop,properties,subview,_i,_j,_len,_len1,_ref;if(!this.disposed){if(null==this.subviews)throw Error("Your `initialize` method must include a super call to      Chaplin `initialize`");for(this.unregisterAllRegions(),_ref=this.subviews,_i=0,_len=_ref.length;_len>_i;_i++)subview=_ref[_i],subview.dispose();for(this.unsubscribeAllEvents(),this.stopListening(),this.off(),this.$el.remove(),properties=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"],_j=0,_len1=properties.length;_len1>_j;_j++)prop=properties[_j],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},View}(Backbone.View)}}),require.define({"chaplin/views/collection_view":function(exports,require,module){"use strict";var $,Backbone,CollectionView,View,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};_=require("underscore"),Backbone=require("backbone"),View=require("chaplin/views/view"),$=Backbone.$,module.exports=CollectionView=function(_super){function CollectionView(options){this.renderAllItems=__bind(this.renderAllItems,this),this.toggleFallback=__bind(this.toggleFallback,this),this.itemsReset=__bind(this.itemsReset,this),this.itemRemoved=__bind(this.itemRemoved,this),this.itemAdded=__bind(this.itemAdded,this),options&&_(this).extend(_.pick(options,["renderItems","itemView"])),this.visibleItems=[],CollectionView.__super__.constructor.apply(this,arguments)}return __extends(CollectionView,_super),CollectionView.prototype.itemView=null,CollectionView.prototype.autoRender=!0,CollectionView.prototype.renderItems=!0,CollectionView.prototype.animationDuration=500,CollectionView.prototype.useCssAnimation=!1,CollectionView.prototype.animationStartClass="animated-item-view",CollectionView.prototype.animationEndClass="animated-item-view-end",CollectionView.prototype.listSelector=null,CollectionView.prototype.$list=null,CollectionView.prototype.fallbackSelector=null,CollectionView.prototype.$fallback=null,CollectionView.prototype.loadingSelector=null,CollectionView.prototype.$loading=null,CollectionView.prototype.itemSelector=null,CollectionView.prototype.filterer=null,CollectionView.prototype.filterCallback=function(view,included){return view.$el.stop(!0,!0).toggle(included)},CollectionView.prototype.visibleItems=null,CollectionView.prototype.initialize=function(options){return null==options&&(options={}),this.addCollectionListeners(),null!=options.filterer?this.filter(options.filterer):void 0},CollectionView.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsReset)},CollectionView.prototype.getTemplateData=function(){var templateData;return templateData={length:this.collection.length},"function"==typeof this.collection.state&&(templateData.resolved="resolved"===this.collection.state()),"function"==typeof this.collection.isSynced&&(templateData.synced=this.collection.isSynced()),templateData},CollectionView.prototype.getTemplateFunction=function(){},CollectionView.prototype.render=function(){return CollectionView.__super__.render.apply(this,arguments),this.$list=this.listSelector?this.$(this.listSelector):this.$el,this.initFallback(),this.initLoadingIndicator(),this.renderItems?this.renderAllItems():void 0},CollectionView.prototype.itemAdded=function(item,collection,options){return null==options&&(options={}),this.insertView(item,this.renderItem(item),options.index)},CollectionView.prototype.itemRemoved=function(item){return this.removeViewForItem(item)
},CollectionView.prototype.itemsReset=function(){return this.renderAllItems()},CollectionView.prototype.initFallback=function(){return this.fallbackSelector?(this.$fallback=this.$(this.fallbackSelector),this.on("visibilityChange",this.toggleFallback),this.listenTo(this.collection,"syncStateChange",this.toggleFallback),this.toggleFallback()):void 0},CollectionView.prototype.toggleFallback=function(){var visible;return visible=0===this.visibleItems.length&&("function"==typeof this.collection.isSynced?this.collection.isSynced():!0),this.$fallback.toggle(visible)},CollectionView.prototype.initLoadingIndicator=function(){return this.loadingSelector&&"function"==typeof this.collection.isSyncing?(this.$loading=this.$(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.toggleLoadingIndicator),this.toggleLoadingIndicator()):void 0},CollectionView.prototype.toggleLoadingIndicator=function(){var visible;return visible=0===this.collection.length&&this.collection.isSyncing(),this.$loading.toggle(visible)},CollectionView.prototype.getItemViews=function(){var itemViews,name,view,_ref;itemViews={},_ref=this.subviewsByName;for(name in _ref)view=_ref[name],"itemView:"===name.slice(0,9)&&(itemViews[name.slice(9)]=view);return itemViews},CollectionView.prototype.filter=function(filterer,filterCallback){var included,index,item,view,_i,_len,_ref;if(this.filterer=filterer,filterCallback&&(this.filterCallback=filterCallback),null==filterCallback&&(filterCallback=this.filterCallback),!_(this.getItemViews()).isEmpty())for(_ref=this.collection.models,index=_i=0,_len=_ref.length;_len>_i;index=++_i){if(item=_ref[index],included="function"==typeof filterer?filterer(item,index):!0,view=this.subview("itemView:"+item.cid),!view)throw Error("CollectionView#filter: "+("no view found for "+item.cid));this.filterCallback(view,included),this.updateVisibleItems(view.model,included,!1)}return this.trigger("visibilityChange",this.visibleItems)},CollectionView.prototype.renderAllItems=function(){var cid,index,item,items,remainingViewsByCid,view,_i,_j,_len,_len1,_ref;for(items=this.collection.models,this.visibleItems=[],remainingViewsByCid={},_i=0,_len=items.length;_len>_i;_i++)item=items[_i],view=this.subview("itemView:"+item.cid),view&&(remainingViewsByCid[item.cid]=view);_ref=this.getItemViews();for(cid in _ref)__hasProp.call(_ref,cid)&&(view=_ref[cid],cid in remainingViewsByCid||this.removeSubview("itemView:"+cid));for(index=_j=0,_len1=items.length;_len1>_j;index=++_j)item=items[index],view=this.subview("itemView:"+item.cid),view?this.insertView(item,view,index,!1):this.insertView(item,this.renderItem(item),index);return 0===items.length?this.trigger("visibilityChange",this.visibleItems):void 0},CollectionView.prototype.renderItem=function(item){var view;return view=this.subview("itemView:"+item.cid),view||(view=this.initItemView(item),this.subview("itemView:"+item.cid,view)),view.render(),view},CollectionView.prototype.initItemView=function(model){if(this.itemView)return new this.itemView({model:model,autoRender:!1});throw Error("The CollectionView#itemView property must be defined or the initItemView() must be overridden.")},CollectionView.prototype.insertView=function(item,view,index,enableAnimation){var $list,$next,$previous,$viewEl,children,included,length,position,viewEl,_this=this;null==index&&(index=null),null==enableAnimation&&(enableAnimation=!0),0===this.animationDuration&&(enableAnimation=!1),position="number"==typeof index?index:this.collection.indexOf(item),included="function"==typeof this.filterer?this.filterer(item,position):!0,viewEl=view.el,$viewEl=view.$el,included&&enableAnimation&&(this.useCssAnimation?$viewEl.addClass(this.animationStartClass):$viewEl.css("opacity",0)),this.filterer&&this.filterCallback(view,included),$list=this.$list,children=this.itemSelector?$list.children(this.itemSelector):$list.children(),children.get(position)!==viewEl&&(length=children.length,0===length||position===length?$list.append(viewEl):0===position?($next=children.eq(position),$next.before(viewEl)):($previous=children.eq(position-1),$previous.after(viewEl))),view.trigger("addedToParent"),this.updateVisibleItems(item,included),included&&enableAnimation&&(this.useCssAnimation?setTimeout(function(){return $viewEl.addClass(_this.animationEndClass)},0):$viewEl.animate({opacity:1},this.animationDuration))},CollectionView.prototype.removeViewForItem=function(item){return this.updateVisibleItems(item,!1),this.removeSubview("itemView:"+item.cid)},CollectionView.prototype.updateVisibleItems=function(item,includedInFilter,triggerEvent){var includedInVisibleItems,visibilityChanged,visibleItemsIndex;return null==triggerEvent&&(triggerEvent=!0),visibilityChanged=!1,visibleItemsIndex=_(this.visibleItems).indexOf(item),includedInVisibleItems=visibleItemsIndex>-1,includedInFilter&&!includedInVisibleItems?(this.visibleItems.push(item),visibilityChanged=!0):!includedInFilter&&includedInVisibleItems&&(this.visibleItems.splice(visibleItemsIndex,1),visibilityChanged=!0),visibilityChanged&&triggerEvent&&this.trigger("visibilityChange",this.visibleItems),visibilityChanged},CollectionView.prototype.dispose=function(){var prop,properties,_i,_len;if(!this.disposed){for(properties=["$list","$fallback","$loading","visibleItems"],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],delete this[prop];return CollectionView.__super__.dispose.apply(this,arguments)}},CollectionView}(View)}}),require.define({"chaplin/lib/route":function(exports,require,module){"use strict";var Backbone,Controller,EventBroker,Route,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty;_=require("underscore"),Backbone=require("backbone"),EventBroker=require("chaplin/lib/event_broker"),Controller=require("chaplin/controllers/controller"),module.exports=Route=function(){function Route(pattern,controller,action,options){if(this.pattern=pattern,this.controller=controller,this.action=action,this.handler=__bind(this.handler,this),this.addParamName=__bind(this.addParamName,this),this.options=options?_.clone(options):{},null!=this.options.name&&(this.name=this.options.name),this.paramNames=[],_(Controller.prototype).has(this.action))throw Error("Route: You should not use existing controller properties as action names");this.createRegExp()}var escapeRegExp,queryStringFieldSeparator,queryStringValueSeparator;return Route.extend=Backbone.Model.extend,_(Route.prototype).extend(EventBroker),escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g,queryStringFieldSeparator="&",queryStringValueSeparator="=",Route.prototype.reverse=function(params){var index,name,notEnoughParams,url,value,_i,_len,_ref;if(url=this.pattern,_.isRegExp(url))return!1;if(notEnoughParams="Route#reverse: Not enough parameters to reverse",_.isArray(params)){if(params.length<this.paramNames.length)throw Error(notEnoughParams);index=0,url=url.replace(/[:*][^\/\?]+/g,function(){var result;return result=params[index],index+=1,result})}else for(_ref=this.paramNames,_i=0,_len=_ref.length;_len>_i;_i++){if(name=_ref[_i],value=params[name],void 0===value)throw Error(notEnoughParams);url=url.replace(RegExp("[:*]"+name,"g"),value)}return this.test(url)?url:!1},Route.prototype.createRegExp=function(){var pattern;return _.isRegExp(this.pattern)?(this.regExp=this.pattern,_.isArray(this.options.names)&&(this.paramNames=this.options.names),void 0):(pattern=this.pattern.replace(escapeRegExp,"\\$&").replace(/(?::|\*)(\w+)/g,this.addParamName),this.regExp=RegExp("^"+pattern+"(?=\\?|$)"))},Route.prototype.addParamName=function(match,paramName){return this.paramNames.push(paramName),":"===match.charAt(0)?"([^/?]+)":"(.*?)"},Route.prototype.test=function(path){var constraint,constraints,matched,name,params;if(matched=this.regExp.test(path),!matched)return!1;if(constraints=this.options.constraints){params=this.extractParams(path);for(name in constraints)if(__hasProp.call(constraints,name)&&(constraint=constraints[name],!constraint.test(params[name])))return!1}return!0},Route.prototype.handler=function(path,options){var params,queryString,_ref;return options=options?_.clone(options):{},queryString=null!=(_ref=options.queryString)?_ref:this.getCurrentQueryString(),params=this.buildParams(path,queryString),options.path=path,this.publishEvent("matchRoute",this,params,options)},Route.prototype.getCurrentQueryString=function(){return location.search.substring(1)},Route.prototype.buildParams=function(path,queryString){return _.extend({},this.extractQueryParams(queryString),this.extractParams(path),this.options.params)},Route.prototype.extractParams=function(path){var index,match,matches,paramName,params,_i,_len,_ref;for(params={},matches=this.regExp.exec(path),_ref=matches.slice(1),index=_i=0,_len=_ref.length;_len>_i;index=++_i)match=_ref[index],paramName=this.paramNames.length?this.paramNames[index]:index,params[paramName]=match;return params},Route.prototype.extractQueryParams=function(queryString){var current,field,pair,pairs,params,value,_i,_len,_ref;if(params={},!queryString)return params;for(pairs=queryString.split(queryStringFieldSeparator),_i=0,_len=pairs.length;_len>_i;_i++)pair=pairs[_i],pair.length&&(_ref=pair.split(queryStringValueSeparator),field=_ref[0],value=_ref[1],field.length&&(field=decodeURIComponent(field),value=decodeURIComponent(value),current=params[field],current?current.push?current.push(value):params[field]=[current,value]:params[field]=value));return params},Route}()}}),require.define({"chaplin/lib/router":function(exports,require,module){"use strict";var Backbone,EventBroker,Route,Router,utils,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};_=require("underscore"),Backbone=require("backbone"),EventBroker=require("chaplin/lib/event_broker"),Route=require("chaplin/lib/route"),utils=require("chaplin/lib/utils"),module.exports=Router=function(){function Router(options){this.options=null!=options?options:{},this.route=__bind(this.route,this),this.match=__bind(this.match,this),_(this.options).defaults({pushState:!0,root:"/"}),this.removeRoot=RegExp("^"+utils.escapeRegExp(this.options.root)+"(#)?"),this.subscribeEvent("!router:route",this.routeHandler),this.subscribeEvent("!router:routeByName",this.routeByNameHandler),this.subscribeEvent("!router:reverse",this.reverseHandler),this.subscribeEvent("!router:changeURL",this.changeURLHandler),this.createHistory()}return Router.extend=Backbone.Model.extend,_(Router.prototype).extend(EventBroker),Router.prototype.createHistory=function(){return Backbone.history||(Backbone.history=new Backbone.History)},Router.prototype.startHistory=function(){return Backbone.history.start(this.options)},Router.prototype.stopHistory=function(){return Backbone.History.started?Backbone.history.stop():void 0},Router.prototype.match=function(pattern,target,options){var action,controller,route,_ref;if(null==options&&(options={}),2===arguments.length&&"object"==typeof target){if(options=target,controller=options.controller,action=options.action,!controller||!action)throw Error("Router#match must receive either target or options.controller & options.action")}else{if(controller=options.controller,action=options.action,controller||action)throw Error("Router#match cannot use both target and options.controller / options.action");_ref=target.split("#"),controller=_ref[0],action=_ref[1]}return route=new Route(pattern,controller,action,options),Backbone.history.handlers.push({route:route,callback:route.handler}),route},Router.prototype.route=function(path,options){var handler,_i,_len,_ref;for(options=options?_.clone(options):{},_(options).defaults({changeURL:!0}),path=path.replace(this.removeRoot,""),_ref=Backbone.history.handlers,_i=0,_len=_ref.length;_len>_i;_i++)if(handler=_ref[_i],handler.route.test(path))return handler.callback(path,options),!0;return!1},Router.prototype.routeHandler=function(path,options,callback){var routed;return 2===arguments.length&&"function"==typeof options&&(callback=options,options={}),routed=this.route(path,options),"function"==typeof callback?callback(routed):void 0},Router.prototype.routeByNameHandler=function(name,params,options,callback){var path,routed;return 3===arguments.length&&"function"==typeof options&&(callback=options,options={}),path=this.reverse(name,params),"string"==typeof path?(routed=this.route(path,options),"function"==typeof callback?callback(routed):void 0):"function"==typeof callback?callback(!1):void 0},Router.prototype.reverse=function(name,params){var handler,url,_i,_len,_ref;for(_ref=Backbone.history.handlers,_i=0,_len=_ref.length;_len>_i;_i++)if(handler=_ref[_i],handler.route.name===name&&(url=handler.route.reverse(params),url!==!1))return url;return!1},Router.prototype.reverseHandler=function(name,params,callback){return callback(this.reverse(name,params))},Router.prototype.changeURL=function(url,options){var navigateOptions;return null==options&&(options={}),navigateOptions={trigger:options.trigger===!0,replace:options.replace===!0},Backbone.history.navigate(url,navigateOptions)},Router.prototype.changeURLHandler=function(url,options){return this.changeURL(url,options)},Router.prototype.disposed=!1,Router.prototype.dispose=function(){return this.disposed?void 0:(this.stopHistory(),delete Backbone.history,this.unsubscribeAllEvents(),this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0)},Router}()}}),require.define({"chaplin/lib/delayer":function(exports,require,module){"use strict";var Delayer;Delayer={setTimeout:function(name,time,handler){var handle,wrappedHandler,_ref,_this=this;return null==(_ref=this.timeouts)&&(this.timeouts={}),this.clearTimeout(name),wrappedHandler=function(){return delete _this.timeouts[name],handler()},handle=setTimeout(wrappedHandler,time),this.timeouts[name]=handle,handle},clearTimeout:function(name){this.timeouts&&null!=this.timeouts[name]&&(clearTimeout(this.timeouts[name]),delete this.timeouts[name])},clearAllTimeouts:function(){var handle,name,_ref;if(this.timeouts){_ref=this.timeouts;for(name in _ref)handle=_ref[name],this.clearTimeout(name)}},setInterval:function(name,time,handler){var handle,_ref;return this.clearInterval(name),null==(_ref=this.intervals)&&(this.intervals={}),handle=setInterval(handler,time),this.intervals[name]=handle,handle},clearInterval:function(name){this.intervals&&this.intervals[name]&&(clearInterval(this.intervals[name]),delete this.intervals[name])},clearAllIntervals:function(){var handle,name,_ref;if(this.intervals){_ref=this.intervals;for(name in _ref)handle=_ref[name],this.clearInterval(name)}},clearDelayed:function(){this.clearAllTimeouts(),this.clearAllIntervals()}},"function"==typeof Object.freeze&&Object.freeze(Delayer),module.exports=Delayer}}),require.define({"chaplin/lib/event_broker":function(exports,require,module){"use strict";var EventBroker,mediator,__slice=[].slice;mediator=require("chaplin/mediator"),EventBroker={subscribeEvent:function(type,handler){if("string"!=typeof type)throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if("function"!=typeof handler)throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return mediator.unsubscribe(type,handler,this),mediator.subscribe(type,handler,this)},unsubscribeEvent:function(type,handler){if("string"!=typeof type)throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if("function"!=typeof handler)throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return mediator.unsubscribe(type,handler)},unsubscribeAllEvents:function(){return mediator.unsubscribe(null,null,this)},publishEvent:function(){var args,type;if(type=arguments[0],args=arguments.length>=2?__slice.call(arguments,1):[],"string"!=typeof type)throw new TypeError("EventBroker#publishEvent: type argument must be a string");return mediator.publish.apply(mediator,[type].concat(__slice.call(args)))}},"function"==typeof Object.freeze&&Object.freeze(EventBroker),module.exports=EventBroker}}),require.define({"chaplin/lib/support":function(exports,require,module){"use strict";var support;support={propertyDescriptors:function(){var o;if("function"!=typeof Object.defineProperty||"function"!=typeof Object.defineProperties)return!1;try{return o={},Object.defineProperty(o,"foo",{value:"bar"}),"bar"===o.foo}catch(error){return!1}}()},module.exports=support}}),require.define({"chaplin/lib/composition":function(exports,require,module){"use strict";var Backbone,Composition,EventBroker,_,__hasProp={}.hasOwnProperty;_=require("underscore"),Backbone=require("backbone"),EventBroker=require("chaplin/lib/event_broker"),module.exports=Composition=function(){function Composition(options){null!=options&&(this.options=_.clone(options)),this.item=this,this.initialize(this.options)}return Composition.extend=Backbone.Model.extend,_(Composition.prototype).extend(Backbone.Events),_(Composition.prototype).extend(EventBroker),Composition.prototype.item=null,Composition.prototype.options=null,Composition.prototype._stale=!1,Composition.prototype.initialize=function(){},Composition.prototype.compose=function(){},Composition.prototype.check=function(options){return _.isEqual(this.options,options)},Composition.prototype.stale=function(value){var item,name;if(null==value)return this._stale;this._stale=value;for(name in this)item=this[name],item&&item!==this&&_(item).has("stale")&&(item.stale=value)},Composition.prototype.disposed=!1,Composition.prototype.dispose=function(){var obj,prop,properties,_i,_len;if(!this.disposed){for(prop in this)__hasProp.call(this,prop)&&(obj=this[prop],obj&&"function"==typeof obj.dispose&&obj!==this&&(obj.dispose(),delete this[prop]));for(this.unsubscribeAllEvents(),this.stopListening(),properties=["redirected"],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],delete this[prop];return this.disposed=!0,"function"==typeof Object.freeze?Object.freeze(this):void 0}},Composition}()}}),require.define({"chaplin/lib/sync_machine":function(exports,require,module){"use strict";var STATE_CHANGE,SYNCED,SYNCING,SyncMachine,UNSYNCED,event,_fn,_i,_len,_ref;for(UNSYNCED="unsynced",SYNCING="syncing",SYNCED="synced",STATE_CHANGE="syncStateChange",SyncMachine={_syncState:UNSYNCED,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===UNSYNCED},isSynced:function(){return this._syncState===SYNCED},isSyncing:function(){return this._syncState===SYNCING},unsync:function(){var _ref;((_ref=this._syncState)===SYNCING||_ref===SYNCED)&&(this._previousSync=this._syncState,this._syncState=UNSYNCED,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))},beginSync:function(){var _ref;((_ref=this._syncState)===UNSYNCED||_ref===SYNCED)&&(this._previousSync=this._syncState,this._syncState=SYNCING,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))},finishSync:function(){this._syncState===SYNCING&&(this._previousSync=this._syncState,this._syncState=SYNCED,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))},abortSync:function(){this._syncState===SYNCING&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(STATE_CHANGE,this,this._syncState))}},_ref=[UNSYNCED,SYNCING,SYNCED,STATE_CHANGE],_fn=function(event){return SyncMachine[event]=function(callback,context){return null==context&&(context=this),this.on(event,callback,context),this._syncState===event?callback.call(context):void 0}},_i=0,_len=_ref.length;_len>_i;_i++)event=_ref[_i],_fn(event);"function"==typeof Object.freeze&&Object.freeze(SyncMachine),module.exports=SyncMachine}}),require.define({"chaplin/lib/utils":function(exports,require,module){"use strict";var support,utils,_,__slice=[].slice,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};_=require("underscore"),support=require("chaplin/lib/support"),utils={beget:function(){var ctor;return"function"==typeof Object.create?Object.create:(ctor=function(){},function(obj){return ctor.prototype=obj,new ctor})}(),serialize:function(data){if("function"==typeof data.serialize)return data.serialize();if("function"==typeof data.toJSON)return data.toJSON();throw new TypeError("utils.serialize: Unknown data was passed")},readonly:function(){var readonlyDescriptor;return support.propertyDescriptors?(readonlyDescriptor={writable:!1,enumerable:!0,configurable:!1},function(){var obj,prop,properties,_i,_len;for(obj=arguments[0],properties=arguments.length>=2?__slice.call(arguments,1):[],_i=0,_len=properties.length;_len>_i;_i++)prop=properties[_i],readonlyDescriptor.value=obj[prop],Object.defineProperty(obj,prop,readonlyDescriptor);return!0}):function(){return!1}}(),getPrototypeChain:function(object){var chain,_ref;for(chain=[object.constructor.prototype];object=null!=(_ref=object.constructor)?_ref.__super__:void 0;)chain.push(object);return chain},getAllPropertyVersions:function(object,property){var proto,result,value,_i,_len,_ref;for(result=[],_ref=utils.getPrototypeChain(object),_i=0,_len=_ref.length;_len>_i;_i++)proto=_ref[_i],value=proto[property],value&&0>__indexOf.call(result,value)&&result.push(value);return result.reverse()},upcase:function(str){return str.charAt(0).toUpperCase()+str.substring(1)},underscorize:function(string){return string.replace(/[A-Z]/g,function(char,index){return(0!==index?"_":"")+char.toLowerCase()})},escapeRegExp:function(str){return((str||"")+"").replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},modifierKeyPressed:function(event){return event.shiftKey||event.altKey||event.ctrlKey||event.metaKey}},"function"==typeof Object.seal&&Object.seal(utils),module.exports=utils}}),require.define({chaplin:function(exports,require,module){module.exports={Application:require("chaplin/application"),mediator:require("chaplin/mediator"),Dispatcher:require("chaplin/dispatcher"),Controller:require("chaplin/controllers/controller"),Composer:require("chaplin/composer"),Composition:require("chaplin/lib/composition"),Collection:require("chaplin/models/collection"),Model:require("chaplin/models/model"),Layout:require("chaplin/views/layout"),View:require("chaplin/views/view"),CollectionView:require("chaplin/views/collection_view"),Route:require("chaplin/lib/route"),Router:require("chaplin/lib/router"),Delayer:require("chaplin/lib/delayer"),EventBroker:require("chaplin/lib/event_broker"),support:require("chaplin/lib/support"),SyncMachine:require("chaplin/lib/sync_machine"),utils:require("chaplin/lib/utils")}}});